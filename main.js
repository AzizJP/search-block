(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function r(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(t){var n=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===e(n)?n:String(n)}var i=n((function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"_showInputError",(function(e){var t=e.nextSibling.nextSibling;t.style.display="inline",t.textContent=e.validationMessage})),r(this,"_deleteInputError",(function(e){var t=e.nextSibling.nextSibling;t.style.display="none",t.textContent=""})),r(this,"_isValid",(function(e){return e.validity.valid})),r(this,"_handleInputEvent",(function(){o._deleteInputError(o._inputElement),o._inputElement.removeEventListener("input",o._handleInputEvent)})),r(this,"enableValidation",(function(){return o._formElement=document.querySelector(".".concat(o._formSelector)),o._inputElement=o._formElement.querySelector(".".concat(o._inputSelector)),o._isValid(o._inputElement)||o._showInputError(o._inputElement),o._setEventListeners(),o._isValid(o._inputElement)})),r(this,"_setEventListeners",(function(){o._inputElement.addEventListener("input",o._handleInputEvent)})),this._formSelector=t,this._inputSelector=n}));function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===a(o)?o:String(o)),r)}var o}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t,this._headers={Accept:"application/vnd.github+json"}}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getRepositoryByName",value:function(e){return fetch("".concat(this._url,"?q=").concat(e," in:name,description per_page=10"),{method:"GET",headers:this._headers}).then(this._checkResponse)}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function f(e,t,n){return t&&s(e.prototype,t),n&&s(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===u(t)?t:String(t)}var p=f((function e(t,n){var r=this,o=t.renderer,i=n.listSelector,a=n.titleSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"_addRepository",(function(e){r._container.append(r._renderer(e))})),y(this,"renderItems",(function(e){0===e.length?document.querySelector(".".concat(r._titleSelector)).textContent="Ничего не найдено":document.querySelector(".".concat(r._titleSelector)).style.display="none",e.slice(0,10).forEach((function(e){r._addRepository(e)}))})),this._renderer=o,this._listSelector=i,this._titleSelector=a,this._container=document.querySelector(".".concat(this._listSelector))})),_=function(e,t,n,r){var o=e%10;return 1===o?t:o>=2&&o<=4?n:r};function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function v(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function h(e,t,n){return(t=S(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){var t=function(e,t){if("object"!==d(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===d(t)?t:String(t)}var w=v((function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"_getRepositoryTemplate",(function(){return document.querySelector("#".concat(r._templateId)).content.querySelector(".".concat(r._cloneSelector)).cloneNode(!0)})),h(this,"_timePassedSince",(function(e){return r._initialDate=new Date(e),r._dateNow=new Date,r._dateDifference=Math.abs(r._dateNow.getTime()-r._initialDate.getTime()),r._diffDays=Math.ceil(r._dateDifference/864e5),r._yearsPassed=Math.floor(r._diffDays/360),r._monthsPassed=Math.floor(r._diffDays%360/30),r._daysPassed=r._diffDays%360%30,r._years=_(r._yearsPassed,"год","года","лет"),r._months=_(r._monthsPassed,"месяц","месяца","месяцев"),r._days=_(r._daysPassed,"день","дня","дней"),0===r._yearsPassed&&0===r._monthsPassed?"".concat(r._daysPassed," ").concat(r._days," назад"):0===r._yearsPassed?"".concat(r._monthsPassed," ").concat(r._months," ").concat(r._daysPassed," ").concat(r._days," назад"):"".concat(r._yearsPassed," ").concat(r._years," ").concat(r._monthsPassed," ").concat(r._months," ").concat(r._daysPassed," ").concat(r._days," назад")})),h(this,"generateRepository",(function(e,t){var n=e.full_name,o=e.html_url,i=e.created_at,a=e.updated_at,c=e.owner,l=t.nameSelector,u=t.createdId,s=t.updatedId,f=t.ownerSelector,y=t.ownerNameSelector,m=t.ownerAvatarSelector,p=t.ownerTypeSelector;return r._repositoryElement=r._getRepositoryTemplate(),r._nameElement=r._repositoryElement.querySelector(".".concat(l)),r._createdDateElement=r._repositoryElement.querySelector("#".concat(u)),r._updatedDateElement=r._repositoryElement.querySelector("#".concat(s)),r._ownerElement=r._repositoryElement.querySelector(".".concat(f)),r._ownerNameElement=r._repositoryElement.querySelector(".".concat(y)),r._ownerAvatarElement=r._repositoryElement.querySelector(".".concat(m)),r._ownerTypeElement=r._repositoryElement.querySelector(".".concat(p)),r._nameElement.textContent=n,r._nameElement.href=o,r._createdDateElement.textContent="Создан: ".concat(r._timePassedSince(i)),r._updatedDateElement.textContent="Обновлён: ".concat(r._timePassedSince(a)),r._ownerElement.href=c.html_url,r._ownerNameElement.textContent=c.login,r._ownerAvatarElement.src=c.avatar_url,r._ownerTypeElement.textContent="".concat(c.type,":"),r._repositoryElement})),this._templateId=t,this._cloneSelector=n}));function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function P(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function j(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=function(e,t){if("object"!==E(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===E(t)?t:String(t)}var q=P((function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),j(this,"_getInputValues",(function(){return n._formElement.querySelector(".search__field").value})),j(this,"_handleSubmit",(function(e){e.preventDefault(),n._submitCallback(n._getInputValues())})),j(this,"setEventListeners",(function(){n._formElement=document.querySelector(".search__form"),n._formElement.addEventListener("submit",n._handleSubmit)})),this._submitCallback=t})),I={nameSelector:"repository__name",createdId:"created",updatedId:"updated",ownerSelector:"repository__owner",ownerNameSelector:"repository__owner-name",ownerAvatarSelector:"repository__owner-avatar",ownerTypeSelector:"repository__owner-type"},C=new l("https://api.github.com/search/repositories"),D=new i("search__form","search__field"),O=function(e){document.querySelector(".".concat("search__button")).textContent=e?"Ищем":"Поиск"},x=new p({renderer:function(e){return new w("list","repository").generateRepository(e,I)}},{listSelector:"list",titleSelector:"list__title"});new q((function(e){D.enableValidation()&&(O(!0),C.getRepositoryByName(e).then((function(e){var t;t=e.items,x.renderItems(t)})).catch((function(e){O(!1),console.log(e)})).finally((function(){O(!1)})))})).setEventListeners()})();
//# sourceMappingURL=main.js.map